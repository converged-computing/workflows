
As Flux prefix for flux commands: sudo -u flux -E PYTHONPATH= -E PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

ðŸ‘‹ Hello, I'm materials-science-0
The main host is materials-science-0
The working directory is /code
preprocess_radiographs.py
flux R encode --hosts=materials-science-[0-3] 

ðŸ“¦ Resources
{"version": 1, "execution": {"R_lite": [{"rank": "0-3", "children": {"core": "0"}}], "starttime": 0.0, "expiration": 0.0, "nodelist": ["materials-science-[0-3]"]}}

ðŸ¸ Diagnostics: false

ðŸ¦Š Independent Minister of Privilege
[exec]
allowed-users = [ "flux", "root" ]
allowed-shells = [ "/usr/libexec/flux/flux-shell" ]	

ðŸ¸ Broker Configuration
# Flux needs to know the path to the IMP executable
[exec]
imp = "/usr/libexec/flux/flux-imp"

[access]
allow-guest-user = true
allow-root-owner = true

# Point to resource definition generated with flux-R(1).
[resource]
path = "/etc/flux/system/R"

[bootstrap]
curve_cert = "/etc/curve/curve.cert"
default_port = 8050
default_bind = "tcp://eth0:%p"
default_connect = "tcp://%h.flux-service.flux-operator.svc.cluster.local:%p"
hosts = [
	{ host="materials-science-[0-3]"},
]
#   ****  Generated on 2023-02-08 05:06:52 by CZMQ  ****
#   ZeroMQ CURVE **Secret** Certificate
#   DO NOT PROVIDE THIS FILE TO OTHER USERS nor change its permissions.

metadata
    name = "materials-science-cert-generator"
    keygen.czmq-version = "4.2.0"
    keygen.sodium-version = "1.0.18"
    keygen.flux-core-version = "0.46.1-227-gc41b5569e"
    keygen.hostname = "materials-science-cert-generator"
    keygen.time = "2023-02-08T05:06:52"
    keygen.userid = "0"
    keygen.zmq-version = "4.3.2"
curve
    public-key = "]o@37.fUd{BvO.:e.5$^3j*VI{?l?#NyPlIca:^o"
    secret-key = "UpGbFU*h1hCfRbN15{@FIXaEe%nOcx{RpNkzdkkF"

âœ¨ Curve certificate generated by helper pod
#   ****  Generated on 2023-02-08 05:06:52 by CZMQ  ****
#   ZeroMQ CURVE **Secret** Certificate
#   DO NOT PROVIDE THIS FILE TO OTHER USERS nor change its permissions.

metadata
    name = "materials-science-cert-generator"
    keygen.czmq-version = "4.2.0"
    keygen.sodium-version = "1.0.18"
    keygen.flux-core-version = "0.46.1-227-gc41b5569e"
    keygen.hostname = "materials-science-cert-generator"
    keygen.time = "2023-02-08T05:06:52"
    keygen.userid = "0"
    keygen.zmq-version = "4.3.2"
curve
    public-key = "]o@37.fUd{BvO.:e.5$^3j*VI{?l?#NyPlIca:^o"
    secret-key = "UpGbFU*h1hCfRbN15{@FIXaEe%nOcx{RpNkzdkkF"
Extra arguments are: python3 /code/preprocess_radiographs.py preprocess /data radiographic_scan_id_112541

ðŸŒ€ flux start -o --config /etc/flux/config -Scron.directory=/etc/flux/system/cron.d   -Stbon.fanout=256   -Srundir=/run/flux   -Sstatedir=/var/lib/flux   -Slocal-uri=local:///run/flux/local   -Slog-stderr-level=6    -Slog-stderr-mode=local flux mini submit  -n 1 --quiet  --watch python3 /code/preprocess_radiographs.py preprocess /data radiographic_scan_id_112541
broker.info[0]: start: none->join 5.42507ms
broker.info[0]: parent-none: join->init 0.022653ms
resource.err[0]: verify: rank 0 (materials-science-0) has extra resources: core[1-3]
cron.info[0]: synchronizing cron tasks to event heartbeat.pulse
job-manager.info[0]: restart: 0 jobs
job-manager.info[0]: restart: 0 running jobs
job-manager.info[0]: restart: checkpoint.job-manager not found
broker.info[0]: rc1.0: running /etc/flux/rc1.d/01-sched-fluxion
sched-fluxion-resource.info[0]: version 0.25.0-38-gb92989ae
sched-fluxion-resource.warning[0]: create_reader: allowlist unsupported
sched-fluxion-resource.info[0]: populate_resource_db: loaded resources from core's resource.acquire
sched-fluxion-qmanager.info[0]: version 0.25.0-38-gb92989ae
broker.info[0]: rc1.0: running /etc/flux/rc1.d/02-cron
broker.info[0]: rc1.0: /etc/flux/rc1 Exited (rc=0) 3.5s
broker.info[0]: rc1-success: init->quorum 3.47731s
broker.info[0]: online: materials-science-0 (ranks 0)
broker.info[0]: online: materials-science-[0-3] (ranks 0-3)
broker.info[0]: quorum-full: quorum->run 28.6127s
       data: /data
     scanid: radiographic_scan_id_112541
 n-averages: 4
Contents of /data:
['averaged', 'original', 'radiographic_scan_id_112541-20230208T041841Z-001.zip', 'radiographic_scan_id_112541-20230208T041841Z-002.zip', 'preprocessed']
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000137.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000176.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000138.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000235.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000220.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000125.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000124.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000232.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000234.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000191.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000127.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000170.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000120.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000180.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000223.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000148.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000195.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000025.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000072.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000210.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000058.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000160.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000139.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000046.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000034.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000037.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000167.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000029.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000044.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000129.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000019.tiff
Reading image: /data/original/radiographic_scan_id_112541/Radiographs__0000237.tiff
Finish preprocessing
Finish averaging
broker.info[0]: rc2.0: flux mini submit -n 1 --quiet --watch python3 /code/preprocess_radiographs.py preprocess /data radiographic_scan_id_112541 Exited (rc=0) 40.8s
broker.info[0]: rc2-success: run->cleanup 40.7775s
broker.info[0]: cleanup.0: flux queue stop --quiet --all --nocheckpoint Exited (rc=0) 0.1s
broker.info[0]: cleanup.1: flux job cancelall --user=all --quiet -f --states RUN Exited (rc=0) 0.0s
broker.info[0]: cleanup.2: flux queue idle --quiet Exited (rc=0) 0.1s
broker.info[0]: cleanup-success: cleanup->shutdown 0.216382s
broker.info[0]: online: materials-science-[0-2] (ranks 0-2)
broker.info[0]: children-complete: shutdown->finalize 47.5021ms
broker.info[0]: rc3.0: running /etc/flux/rc3.d/01-sched-fluxion
broker.info[0]: rc3.0: /etc/flux/rc3 Exited (rc=0) 0.1s
broker.info[0]: rc3-success: finalize->goodbye 0.106257s
broker.info[0]: goodbye: goodbye->exit 0.02303ms
